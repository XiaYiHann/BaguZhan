# 题目 CRUD

## 目的

提供题库管理功能，包括题目的创建、查询、更新和删除操作。

## 需求

### 需求：创建题目

管理员必须能够创建新的题目。

#### 场景：成功创建题目
- **当** 管理员 POST 有效的题目数据到 `/api/admin/questions`
- **那么** 系统返回 201 Created 状态码
- **并且** 响应包含创建的题目（含生成的 ID）
- **并且** 题目被保存到数据库

#### 场景：创建题目缺少必填字段
- **当** 管理员 POST 缺少必填字段的题目数据
- **那么** 系统返回 422 Unprocessable Entity 状态码
- **并且** 错误响应说明缺少的字段

#### 场景：创建题目选项验证
- **当** 管理员创建题目时
- **那么** 系统必须验证至少包含 2 个选项
- **并且** 必须有且仅有 1 个选项标记为正确答案

### 需求：查询题目列表

管理员必须能够查询题目列表，支持分页和筛选。

#### 场景：获取题目列表
- **当** 管理员 GET `/api/admin/questions` 不带参数
- **那么** 系统返回 200 OK 状态码
- **并且** 默认返回第 1 页，每页 20 条记录
- **并且** 响应包含总数、当前页、每页数量信息

#### 场景：按主题筛选
- **当** 管理员 GET `/api/admin/questions?topic=JavaScript`
- **那么** 系统只返回 JavaScript 主题的题目
- **并且** 分页信息反映筛选后的结果数

#### 场景：按难度筛选
- **当** 管理员 GET `/api/admin/questions?difficulty=easy`
- **那么** 系统只返回简单难度的题目

#### 场景：包含已删除题目
- **当** 管理员 GET `/api/admin/questions?includeDeleted=true`
- **那么** 系统返回包含软删除题目的完整列表

### 需求：更新题目

管理员必须能够更新现有题目。

#### 场景：成功更新题目
- **当** 管理员 PUT 有效数据到 `/api/admin/questions/:id`
- **那么** 系统返回 200 OK 状态码
- **并且** 题目被更新
- **并且** 响应包含更新后的题目数据

#### 场景：更新不存在的题目
- **当** 管理员 PUT 数据到不存在的题目 ID
- **那么** 系统返回 404 Not Found 状态码

### 需求：删除题目

管理员必须能够软删除题目。

#### 场景：成功删除题目
- **当** 管理员 DELETE `/api/admin/questions/:id`
- **那么** 系统返回 204 No Content 状态码
- **并且** 题目的 `deleted_at` 字段被设置为当前时间
- **并且** 题目不再在默认查询中出现

#### 场景：删除不存在的题目
- **当** 管理员 DELETE 不存在的题目 ID
- **那么** 系统返回 404 Not Found 状态码

### 需求：题目数据完整性

系统必须确保题目数据的完整性。

#### 场景：题目必填字段
- **当** 创建或更新题目时
- **那么** 以下字段必须存在：content, topic, difficulty, options
- **并且** difficulty 必须是以下值之一：easy, medium, hard

#### 场景：选项结构验证
- **当** 创建或更新题目时
- **那么** 每个选项必须包含：id, optionText, optionOrder
- **并且** 必须有且仅有 1 个选项的 isCorrect 为 true
