schema: spec-driven

# 项目上下文（可选）
# 在创建工件时向 AI 显示此信息。
# 添加您的技术栈、约定、风格指南、领域知识等。
context: |
  ## 项目目的
  "八股斩"是一款结合预置题库与极简漫画视觉风格的程序员面试准备工具。核心目标是以高频反馈的"斩题"体验提升用户对面试知识点的记忆与理解。

  ## 技术栈
  - 客户端：Flutter + Dart（iOS/Android 跨平台）
  - 后端：BFF（Node.js/TypeScript）
  - 题库数据库：PostgreSQL（题目、选项、解析、标签）
  - 用户数据库：PostgreSQL/Firestore（错题本/进度/历史）
  - 设计系统：淡色系 + 多邻国风格（柔和配色、清晰层级、友好动效）

  ## 代码风格
  - Dart/Flutter 使用官方 lint 规则，保持清晰可读
  - TypeScript 使用 ESLint/Prettier 统一风格
  - 组件与文件命名清晰表达职责

  ## 架构模式
  - 客户端分层：UI（视图）/ 状态管理（题目流转）/ 数据访问（API）
  - BFF 负责：鉴权、限流、题库查询、结果缓存、错题服务
  - 数据库设计：题目、选项、用户记录、错题本、学习进度分离存储

  ## 测试策略
  - **TDD 为强制开发方式**：必须先写测试 → 实现 → 重构
  - 单元测试：题目解析、状态机、数据仓储层
  - 组件测试：题目卡片、反馈状态、加载动画
  - 集成测试：模拟 API 返回的完整答题流程
  - 前端 UI 必须使用 ui-ux-pro-max skill 获取设计规范

  ## Git工作流
  - 基于主分支的短分支开发
  - 变更以 OpenSpec 提案驱动
  - **代码行数限制**：单个文件不超过 300 行

  ## 提交消息规范
  采用 Conventional Commits 格式：`<type>(<scope>): <subject>`

  类型前缀：
  - `feat`: 新功能 (feature)
  - `fix`: 修复 Bug
  - `docs`: 文档变更 (documentation)
  - `style`: 代码格式调整（不影响功能）
  - `refactor`: 重构（既非新功能也非 Bug 修复）
  - `perf`: 性能优化 (performance)
  - `test`: 测试相关
  - `chore`: 构建/工具/依赖更新
  - `ci`: CI/CD 配置变更

  作用域示例：
  - `client` / `flutter` / `dart`: 客户端代码
  - `server` / `bff` / `api`: 后端服务
  - `db` / `database`: 数据库/迁移
  - `ui`: 界面组件
  - `test`: 测试代码

  ## 领域上下文
  - 目标用户：准备大厂面试的程序员
  - 题目范围：基础/进阶/底层架构，模拟真实追问
  - 用户流程：选主题 → 随机出题 → 选择 → 反馈 → 解析/助记/场景 → 下一题

  ## 重要约束
  - 题库内容需要人工审核，确保质量和准确性
  - 移动端优先，长文本需可读与可滚动的布局
  - 题目查询需支持缓存，提升响应速度
  - MVP 阶段错题本功能可选，后续可扩展
  - 视觉主题需保持淡色系与多邻国风格一致性

  ## 前端 UI 设计规范
  - **强制使用** `ui-ux-pro-max` skill 获取设计指南
  - 所有 UI 组件必须先通过 skill 获取设计规范后再实现
  - 颜色、排版、动效需遵循 skill 返回的规范

  ## 外部依赖
  - PostgreSQL（题库存储与查询）
  - Firestore 可选（错题本/进度/历史）

  ## 实现流程（MVP）
  1. M1：基础 UI 原型 + 固定题目回路（无后端）
  2. M2：接入 BFF + PostgreSQL 题库，支持题目查询与筛选
  3. M3：淡色系 + 多邻国风格动效与交互优化，多尺寸适配
  4. M4：错题本/进度持久化 + 题库管理功能

  ## 里程碑验收
  - M1：用户可完成完整答题循环，反馈正确/错误状态
  - M2：从数据库读取题目，支持按主题/难度筛选、随机出题、每日一题
  - M3：UI 视觉与交互达到多邻国风格一致的轻松感与流畅体验
  - M4：错题本与学习进度可持久化与检索，题库管理 API 可用

# 每个工件的规则（可选）
# 为特定工件添加自定义规则。
# 示例：
#   rules:
#     proposal:
#       - 保持提案在500字以内
#       - 始终包含"非目标"部分
#     tasks:
#       - 将任务分解为最多2小时的块
