# 项目 上下文

## 目的
“八股斩”是一款结合 AI 实时生成与极简漫画视觉风格的程序员面试准备工具。核心目标是以高频反馈的“斩题”体验提升用户对面试知识点的记忆与理解。

## 技术栈
- 客户端：Flutter + Dart（iOS/Android 跨平台）
- 后端：轻量 BFF/Serverless（Node.js/TypeScript 优先）
- AI 能力：Gemini API（题目、解析、助记、实战场景生成）
- 数据存储（可选）：Firestore（错题本/进度/历史）
- 设计系统：淡色系 + 多邻国风格（柔和配色、清晰层级、友好动效）

## 项目约定

### 代码风格
- Dart/Flutter 使用官方 lint 规则，保持清晰可读
- TypeScript 使用 ESLint/Prettier 统一风格
- 组件与文件命名清晰表达职责

### 架构模式
- 客户端分层：UI（视图）/ 状态管理（题目流转）/ 数据访问（API）
- BFF 负责：鉴权、限流、Prompt 模板、结构化输出校验、缓存
- Prompt 结果必须结构化 JSON，避免非结构化文本影响渲染

### 测试策略
- TDD 为默认开发方式：先写测试 → 实现 → 重构
- 单元测试：题目解析、状态机、Prompt 输出校验
- 组件测试：题目卡片、反馈状态、加载动画
- 集成测试：模拟 API 返回的完整答题流程

### Git工作流
- 基于主分支的短分支开发
- 变更以 OpenSpec 提案驱动
- 合并前确保测试通过

## 领域上下文
- 目标用户：准备大厂面试的程序员
- 题目范围：基础/进阶/底层架构，模拟真实追问
- 用户流程：选路 → AI 出题 → 选择 → 反馈 → 解析/助记/场景 → 下一题

## 重要约束
- AI 实时生成可能存在延迟，需有“AI 正在作画”加载动画
- 解析内容需要降低幻觉风险，Prompt 需严格限制输出
- 移动端优先，长文本需可读与可滚动的布局
- MVP 可无状态，错题本后续可扩展
- 视觉主题需保持淡色系与多邻国风格一致性

## 外部依赖
- Gemini API（题目与解析生成）
- Firestore（可选：错题本/进度/历史）

## 实现流程（MVP）
1. M1：基础 UI 原型 + 固定题目回路（无 AI）
2. M2：接入 BFF + Gemini API，题目与解析实时生成
3. M3：淡色系 + 多邻国风格动效与交互优化，多尺寸适配
4. M4：错题本/进度持久化（Firestore）

## 里程碑验收
- M1：用户可完成完整答题循环，反馈正确/错误状态
- M2：AI 生成题目、解析、助记与实战场景可用
- M3：UI 视觉与交互达到多邻国风格一致的轻松感与流畅体验
- M4：错题本与学习进度可持久化与检索
