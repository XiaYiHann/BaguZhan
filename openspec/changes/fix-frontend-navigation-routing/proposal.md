## 为什么

当前 Flutter 客户端的导航/路由存在多处断裂与不一致：页面会跳转到未注册的路由（例如 `/quiz`、`/learning-path`、`/rank`），并被 `onGenerateRoute` 悄悄兜底回首页，导致用户感知为“点了没反应/迷路”。同时，多处用户相关数据请求在未建立 `userId` 的情况下触发“用户未登录”，让核心浏览与学习流程无法正常使用。

现在修复的原因：这些问题会直接破坏主流程（开始练习/学习路径/底部导航），属于高频高损的可用性缺陷；继续叠加功能会放大混乱与维护成本。

## 变更内容

- 统一并文档化 Flutter 客户端的“路由注册表”（route name、页面目的地、所需参数），消除未注册/拼写不一致的路由。
- 为历史/别名路由提供兼容映射（例如将旧路由名映射到新的标准路由名），避免按钮/入口分散使用不同字符串。
- 规范底部导航栏的 item id 与页面路由映射，确保选中态与实际页面一致，且点击不会跳转到不存在页面。
- 明确并实现最小化的 `userId` 引导策略：在进入依赖用户数据的功能前确保 `userId` 已建立（或提供清晰的登录/匿名策略），避免“用户未登录”作为默认错误出现在正常流程中。
- 增加防回归约束：禁止页面继续使用未文档化的硬编码 route 字符串（改为使用集中定义的 route 常量/映射）。

## 功能 (Capabilities)

### 新增功能

- `app-navigation`: 定义 Flutter 客户端的导航契约（标准路由、允许的别名路由、底部导航 id→路由映射、参数约束、禁止的用法），作为跨页面的一致性规范。

### 修改功能

- `flutter-app`: 增补应用启动与导航系统的规范要求（MaterialApp 路由注册表、启动时机建立 session/userId 的职责边界）。
- `question-flow`: 明确“开始练习/进入答题”的标准入口路由与流程跳转，避免 `/quiz` 与 `/question` 等不一致导致断链。
- `ui-components`: 明确底部导航栏的 item id 集合与行为契约（selectedId 必须可映射到可用页面；点击后必须到达真实页面）。

## 影响

- Flutter 客户端（高）：`baguzhan/lib/main.dart` 路由生成逻辑、各页面的 `Navigator.pushNamed` 调用点、底部导航组件与其调用方、以及涉及 userId 的 Provider 初始化/调用路径。
- 测试（中）：需要补充/调整集成测试覆盖“从首页/仪表板/学习路径进入答题”等导航主路径，验证不会落回兜底首页且不会出现“用户未登录”。
- BFF/API（低）：本变更以客户端路由与会话引导为主，不要求新增后端能力；如需匿名 userId/会话策略，可能需要确认现有 API 对该策略的兼容性。
