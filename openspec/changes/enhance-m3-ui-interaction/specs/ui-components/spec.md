# ui-components 规范增量 - M3 交互增强

## 新增需求

### Requirement: 扩展颜色系统

系统 MUST 扩展主题颜色系统，支持功能色、难度色和主题映射。

#### 场景：功能色定义

- **当** 主题颜色系统加载
- **那么** 包含以下功能色：
  - 错题本橙: #FF9600
  - 报告绿: #82C91E
  - 连击金: #FFC800
  - 连击背景: #FFF4CC

#### 场景：难度等级色定义

- **当** 显示难度标签
- **那么** 使用对应颜色：
  - 简单: #58CC02 (绿色)
  - 中等: #1CB0F6 (蓝色)
  - 困难: #CE82FF (紫色)

#### 场景：主题色彩映射

- **当** 显示主题相关元素
- **那么** 使用主题对应颜色：
  - JavaScript: #F7DF1E (黄色)
  - React: #61DAFB (蓝色)
  - Vue: #4FC08D (绿色)
  - TypeScript: #3178C6 (深蓝)
  - Node.js: #339933 (绿色)

---

### Requirement: 快速操作按钮交互反馈

系统 MUST 为快速操作按钮提供按下状态反馈。

#### 场景：按下状态视觉反馈

- **当** 用户按下快速操作按钮
- **那么** 按钮产生 2px 下沉位移
- **并且** 阴影从 `shadowDown` 切换为 `shadowPressed`
- **并且** 过渡时长为 100ms

#### 场景：按下状态触觉反馈

- **当** 用户按下快速操作按钮
- **那么** 触发 `HapticFeedback.lightImpact()`

---

### Requirement: 主题卡片进度显示

系统 MUST 在主题卡片上显示学习进度。

#### 场景：进度文本显示

- **当** 主题卡片渲染
- **那么** 显示"已完成/总数"文本
- **例如** "5/10"

#### 场景：进度条显示

- **当** 主题卡片渲染
- **那么** 显示水平进度条
- **并且** 进度条填充比例为 `completedCount / totalCount`
- **并且** 进度条高度为 8px
- **并且** 圆角为 4px
- **并且** 填充色为 `duoGreen`

#### 场景：进度条动画

- **当** 进度数据更新
- **那么** 进度条使用 `FractionallySizedBox` 平滑过渡
- **并且** 过渡时长为 300ms

---

### Requirement: 提交按钮脉冲动画

系统 MUST 在提交按钮可点击时显示脉冲动画。

#### 场景：脉冲触发条件

- **当** 用户已选择选项且未提交答案
- **那么** 提交按钮显示脉冲动画
- **并且** 脉冲效果为阴影模糊半径在 8-12px 之间循环

#### 场景：脉冲动画参数

- **当** 脉冲动画执行
- **那么** 使用 `easeInOutSine` 缓动曲线
- **并且** 循环时长为 800ms
- **并且** 阴影颜色为 `duoGreen` 40% 透明度

---

### Requirement: 选项卡选中缩放动画

系统 MUST 在选项卡选中时提供缩放反馈。

#### 场景：选中缩放效果

- **当** 用户点击选项卡
- **那么** 选项卡缩放至 1.02 倍
- **并且** 过渡时长为 150ms
- **并且** 取消选择时恢复至 1.0 倍

---

### Requirement: 反馈面板表情动画

系统 MUST 在反馈面板显示表情符号动画。

#### 场景：正确答案表情

- **当** 用户答案正确
- **那么** 反馈面板显示 🎉 表情
- **并且** 使用弹性缩放动画弹出
- **并且** 缓动曲线为 `elasticOut`
- **并且** 动画时长为 400ms

#### 场景：错误答案表情

- **当** 用户答案错误
- **那么** 反馈面板显示 💪 表情
- **并且** 使用相同的弹性动画效果

#### 场景：表情样式

- **当** 表情渲染
- **那么** 字体大小为 48px
- **并且** 位于反馈面板顶部

---

### Requirement: 页面过渡动画

系统 MUST 提供统一的页面过渡动画。

#### 场景：页面切换效果

- **当** 用户导航到新页面
- **那么** 新页面从下方轻微滑入（偏移 5% 高度）
- **并且** 同时淡入（透明度 0 → 1）
- **并且** 使用 `easeOutCubic` 缓动
- **并且** 动画时长为 300ms

---

## 修改需求

### Requirement: 进度条组件（修改）

进度条组件 MUST 支持连击提示显示。

#### 场景：连击徽章显示（新增）

- **当** 连击数 ≥ 3
- **那么** 进度条右侧显示火焰徽章
- **并且** 徽章显示 🔥 图标和连击数
- **并且** 徽章背景色为 `streakColor`
- **并且** 徽章有 2px 白色边框
- **并且** 徽章为胶囊形（圆角 20px）

#### 场景：连击徽章隐藏（新增）

- **当** 连击数 < 3
- **那么** 不显示连击徽章

---

## 新增动画常量

### 场景：弹性动画参数

- **当** 需要弹性动画效果
- **那么** 使用以下参数：
  - 时长: `durationElastic = 400ms`
  - 曲线: `curveElastic = Curves.elasticOut`

### 场景：脉冲动画参数

- **当** 需要脉冲动画效果
- **那么** 使用以下参数：
  - 时长: `durationPulse = 800ms`
  - 曲线: `curvePulse = Curves.easeInOutSine`
