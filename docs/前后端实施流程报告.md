# "å…«è‚¡æ–©" å‰åç«¯å®æ–½æµç¨‹æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®åç§°**: å…«è‚¡æ–©
**é¡¹ç›®å®šä½**: ç»“åˆæç®€æ¼«ç”»è§†è§‰é£æ ¼çš„ç¨‹åºå‘˜é¢è¯•å‡†å¤‡å·¥å…·
**æ ¸å¿ƒç›®æ ‡**: ä»¥é«˜é¢‘åé¦ˆçš„"æ–©é¢˜"ä½“éªŒæå‡ç”¨æˆ·å¯¹é¢è¯•çŸ¥è¯†ç‚¹çš„è®°å¿†ä¸ç†è§£

### æ ¸å¿ƒå˜æ›´

**åŸæ–¹æ¡ˆ**: AI å®æ—¶ç”Ÿæˆé¢˜ç›®
**æ–°æ–¹æ¡ˆ**: æ•°æ®åº“é¢„ç½®é¢˜åº“

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ |
|------|---------|
| å®¢æˆ·ç«¯ | Flutter + Dartï¼ˆiOS/Android è·¨å¹³å°ï¼‰ |
| åç«¯ | Node.js + TypeScriptï¼ˆBFFï¼‰ |
| é¢˜åº“æ•°æ®åº“ | PostgreSQL / MongoDB / Firestore |
| ç”¨æˆ·æ•°æ®åº“ | Firestoreï¼ˆå¯é€‰ï¼šé”™é¢˜æœ¬/è¿›åº¦ï¼‰ |
| è®¾è®¡é£æ ¼ | æ·¡è‰²ç³» + å¤šé‚»å›½é£æ ¼ |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter å®¢æˆ·ç«¯                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  UI å±‚    â”‚  â”‚ çŠ¶æ€ç®¡ç†å±‚ â”‚  â”‚ æ•°æ®è®¿é—®å±‚ â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BFF å±‚ (Node.js + TypeScript)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   é‰´æƒ    â”‚  â”‚ é¢˜åº“æœåŠ¡  â”‚  â”‚ ç¼“å­˜ç­–ç•¥  â”‚           â”‚
â”‚  â”‚   é™æµ    â”‚  â”‚ è¿›åº¦æœåŠ¡  â”‚  â”‚ é”™é¢˜æœåŠ¡  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¢˜åº“æ•°æ®åº“   â”‚  â”‚  Firestore    â”‚  â”‚  ç®¡ç†åå°     â”‚
â”‚  (é¢˜åº“å­˜å‚¨)   â”‚  â”‚  (ç”¨æˆ·æ•°æ®)   â”‚  â”‚  (é¢˜ç›®å½•å…¥)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†å±‚èŒè´£

#### Flutter å®¢æˆ·ç«¯
- **UI å±‚**: è´Ÿè´£ç•Œé¢æ¸²æŸ“ä¸ç”¨æˆ·äº¤äº’
- **çŠ¶æ€ç®¡ç†å±‚**: é¢˜ç›®æµè½¬ã€ç­”é¢˜çŠ¶æ€ã€åŠ è½½çŠ¶æ€
- **æ•°æ®è®¿é—®å±‚**: API è°ƒç”¨ã€æ•°æ®ç¼“å­˜ã€é”™è¯¯å¤„ç†

#### BFF å±‚
- **é‰´æƒ**: ç”¨æˆ·èº«ä»½éªŒè¯ä¸æˆæƒ
- **é™æµ**: API è°ƒç”¨é¢‘ç‡æ§åˆ¶
- **é¢˜åº“æœåŠ¡**: é¢˜ç›®æŸ¥è¯¢ã€ç­›é€‰ã€éšæœºè·å–
- **è¿›åº¦æœåŠ¡**: ç­”é¢˜è¿›åº¦è®°å½•ä¸ç»Ÿè®¡
- **é”™é¢˜æœåŠ¡**: é”™é¢˜è®°å½•ä¸æ£€ç´¢
- **ç¼“å­˜ç­–ç•¥**: å‡å°‘é‡å¤æŸ¥è¯¢

#### æ•°æ®åº“å±‚
- **é¢˜åº“æ•°æ®åº“**: å­˜å‚¨æ‰€æœ‰é¢˜ç›®ã€é€‰é¡¹ã€è§£æã€æ ‡ç­¾
- **ç”¨æˆ·æ•°æ®åº“**: å­˜å‚¨ç”¨æˆ·é”™é¢˜æœ¬ã€å­¦ä¹ è¿›åº¦

---

## ğŸ—„ï¸ é¢˜åº“æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“é€‰å‹å»ºè®®

| æ•°æ®åº“ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|--------|------|---------|
| **PostgreSQL** | å…³ç³»å‹ã€äº‹åŠ¡æ”¯æŒã€å…¨æ–‡æœç´¢ | é¢˜ç›®ç»“æ„åŒ–å¼ºã€éœ€è¦å¤æ‚æŸ¥è¯¢ |
| **MongoDB** | çµæ´»æ–‡æ¡£ã€æ˜“æ‰©å±• | é¢˜ç›®æ ¼å¼å¤šå˜ã€å¿«é€Ÿè¿­ä»£ |
| **Firestore** | å®æ—¶åŒæ­¥ã€æ— æœåŠ¡å™¨ | å°å‹é¡¹ç›®ã€å¿«é€Ÿå¼€å‘ |

### æ¨èæ–¹æ¡ˆï¼šPostgreSQL

ä¸ºä»€ä¹ˆé€‰æ‹© PostgreSQLï¼š
- é¢˜ç›®ç»“æ„ç›¸å¯¹ç¨³å®šï¼Œé€‚åˆå…³ç³»å‹æ•°æ®åº“
- æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆæŒ‰éš¾åº¦ã€æ ‡ç­¾ã€éšæœºç­‰ï¼‰
- æ”¯æŒå…¨æ–‡æœç´¢ï¼ˆæœç´¢é¢˜åº“ï¼‰
- æ•°æ®ä¸€è‡´æ€§å¼ºï¼Œé€‚åˆé¢˜åº“ç®¡ç†

### æ•°æ®è¡¨è®¾è®¡

#### 1. é¢˜ç›®è¡¨ (questions)

```sql
CREATE TABLE questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    content TEXT NOT NULL,                    -- é¢˜ç›®å†…å®¹
    topic VARCHAR(50) NOT NULL,               -- ä¸»é¢˜ï¼ˆJavaScript/React/Vueç­‰ï¼‰
    difficulty VARCHAR(20) NOT NULL,          -- éš¾åº¦ï¼ˆeasy/medium/hardï¼‰
    explanation TEXT,                         -- è¯¦ç»†è§£æ
    mnemonic TEXT,                            -- åŠ©è®°å£è¯€
    scenario TEXT,                            -- å®æˆ˜åœºæ™¯
    tags TEXT[],                              -- æ ‡ç­¾æ•°ç»„ ['é—­åŒ…', 'ä½œç”¨åŸŸ']
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    is_active BOOLEAN DEFAULT true            -- æ˜¯å¦å¯ç”¨
);

-- ç´¢å¼•
CREATE INDEX idx_questions_topic ON questions(topic);
CREATE INDEX idx_questions_difficulty ON questions(difficulty);
CREATE INDEX idx_questions_tags ON questions USING GIN(tags);
CREATE INDEX idx_questions_content_search ON questions USING GIN(to_tsvector('chinese', content));
```

#### 2. é€‰é¡¹è¡¨ (options)

```sql
CREATE TABLE options (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    question_id UUID NOT NULL REFERENCES questions(id) ON DELETE CASCADE,
    option_text TEXT NOT NULL,                -- é€‰é¡¹å†…å®¹
    option_order INTEGER NOT NULL,            -- é€‰é¡¹é¡ºåºï¼ˆ0-3ï¼‰
    is_correct BOOLEAN NOT NULL,              -- æ˜¯å¦æ­£ç¡®ç­”æ¡ˆ
    created_at TIMESTAMP DEFAULT NOW()
);

-- å”¯ä¸€çº¦æŸï¼šæ¯ä¸ªé¢˜ç›®æœ€å¤š4ä¸ªé€‰é¡¹
CREATE UNIQUE INDEX idx_options_question_order ON options(question_id, option_order);
```

#### 3. ç”¨æˆ·ç­”é¢˜è®°å½•è¡¨ (user_answers)

```sql
CREATE TABLE user_answers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(100) NOT NULL,            -- ç”¨æˆ·ID
    question_id UUID NOT NULL REFERENCES questions(id),
    selected_option_id UUID NOT NULL,         -- é€‰æ‹©çš„é€‰é¡¹
    is_correct BOOLEAN NOT NULL,              -- æ˜¯å¦æ­£ç¡®
    answered_at TIMESTAMP DEFAULT NOW(),
    time_spent INTEGER                        -- ç­”é¢˜ç”¨æ—¶ï¼ˆç§’ï¼‰
);

CREATE INDEX idx_user_answers_user ON user_answers(user_id);
CREATE INDEX idx_user_answers_question ON user_answers(question_id);
```

#### 4. ç”¨æˆ·é”™é¢˜è¡¨ (user_wrong_questions)

```sql
CREATE TABLE user_wrong_questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(100) NOT NULL,
    question_id UUID NOT NULL REFERENCES questions(id),
    wrong_count INTEGER DEFAULT 1,            -- é”™è¯¯æ¬¡æ•°
    last_wrong_at TIMESTAMP DEFAULT NOW(),
    is_resolved BOOLEAN DEFAULT false,        -- æ˜¯å¦å·²æŒæ¡
    resolved_at TIMESTAMP,                    -- æŒæ¡æ—¶é—´
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE UNIQUE INDEX idx_wrong_questions ON user_wrong_questions(user_id, question_id);
```

#### 5. ç”¨æˆ·è¿›åº¦è¡¨ (user_progress)

```sql
CREATE TABLE user_progress (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(100) NOT NULL,
    topic VARCHAR(50) NOT NULL,               -- ä¸»é¢˜
    total_answered INTEGER DEFAULT 0,         -- æ€»ç­”é¢˜æ•°
    correct_count INTEGER DEFAULT 0,          -- æ­£ç¡®æ•°
    current_streak INTEGER DEFAULT 0,         -- å½“å‰è¿ç»­æ­£ç¡®
    best_streak INTEGER DEFAULT 0,            -- æœ€ä½³è¿ç»­æ­£ç¡®
    last_answered_at TIMESTAMP DEFAULT NOW(),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE UNIQUE INDEX idx_user_progress ON user_progress(user_id, topic);
```

#### 6. é¢˜ç›®æ ‡ç­¾è¡¨ (tags)

```sql
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,         -- æ ‡ç­¾åç§°
    category VARCHAR(50),                     -- æ ‡ç­¾åˆ†ç±»
    question_count INTEGER DEFAULT 0,         -- å…³è”é¢˜ç›®æ•°
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ”„ å¼€å‘æµç¨‹

### æ ¸å¿ƒåŸåˆ™

1. **TDD ä¼˜å…ˆ**: å…ˆå†™æµ‹è¯• â†’ å®ç° â†’ é‡æ„
2. **OpenSpec é©±åŠ¨**: å˜æ›´ä»¥ææ¡ˆé©±åŠ¨
3. **çŸ­åˆ†æ”¯å¼€å‘**: åŸºäºä¸»åˆ†æ”¯çš„çŸ­åˆ†æ”¯
4. **æµ‹è¯•å…ˆè¡Œ**: åˆå¹¶å‰ç¡®ä¿æµ‹è¯•é€šè¿‡

### å¼€å‘æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éœ€æ±‚/ææ¡ˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»ºææ¡ˆ    â”‚ â”€â”€â–¶ â”‚ ææ¡ˆè¯„å®¡    â”‚
â”‚ (OpenSpec)  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
       â–¼                   â–¼
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            â”‚ ææ¡ˆé€šè¿‡    â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â–¼
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   TDD å¼€å§‹   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                         â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ å†™æµ‹è¯•ç”¨ä¾‹  â”‚          â”‚ åç«¯å¼€å‘    â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚ (BFF + DB)  â”‚
              â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â–¼                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ å‰ç«¯å¼€å‘    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ é›†æˆæµ‹è¯•    â”‚
       â”‚ (Flutter)   â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
              â”‚                        â–¼
              â–¼                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ æµ‹è¯•é€šè¿‡?   â”‚
       â”‚ ä»£ç å®¡æŸ¥    â”‚ â”€â”€No â”€â”€â”€â–¶â”‚      â”‚      â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
              â”‚                        â”‚ Yes
              â–¼                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ åˆå¹¶ä¸»åˆ†æ”¯  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  åˆå¹¶ PR    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å…·ä½“å®æ–½æ­¥éª¤

### é‡Œç¨‹ç¢‘ M1: åŸºç¡€ UI åŸå‹ï¼ˆå›ºå®šæ•°æ®ï¼‰

**ç›®æ ‡**: ç”¨æˆ·å¯å®Œæˆå®Œæ•´ç­”é¢˜å¾ªç¯ï¼Œåé¦ˆæ­£ç¡®/é”™è¯¯çŠ¶æ€

#### 1.1 ç¯å¢ƒæ­å»º

```bash
# Flutter ç¯å¢ƒæ£€æŸ¥
flutter doctor

# åˆ›å»ºé¡¹ç›®
flutter create baguzhan
cd baguzhan

# é…ç½®ä¾èµ–ï¼ˆpubspec.yamlï¼‰
```

**æ ¸å¿ƒä¾èµ–**:
```yaml
dependencies:
  flutter:
    sdk: flutter
  # çŠ¶æ€ç®¡ç†
  provider: ^6.1.0
  # ç½‘ç»œè¯·æ±‚
  dio: ^5.4.0
  # æœ¬åœ°å­˜å‚¨ï¼ˆç¼“å­˜ï¼‰
  shared_preferences: ^2.2.0
  # UI ç»„ä»¶
  flutter_svg: ^2.0.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0
  mockito: ^5.4.0
```

#### 1.2 é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ app_constants.dart
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â””â”€â”€ app_theme.dart
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ logger.dart
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ question_model.dart
â”‚   â”‚   â”œâ”€â”€ option_model.dart
â”‚   â”‚   â””â”€â”€ user_answer_model.dart
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ question_repository.dart
â”‚   â””â”€â”€ datasources/
â”‚       â””â”€â”€ local_question_datasource.dart
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â””â”€â”€ question.dart
â”‚   â””â”€â”€ usecases/
â”‚       â””â”€â”€ get_questions.dart
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ home_page.dart
â”‚   â”‚   â”œâ”€â”€ question_page.dart
â”‚   â”‚   â””â”€â”€ result_page.dart
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ question_card.dart
â”‚   â”‚   â”œâ”€â”€ option_card.dart
â”‚   â”‚   â””â”€â”€ progress_bar.dart
â”‚   â””â”€â”€ providers/
â”‚       â””â”€â”€ question_provider.dart
â””â”€â”€ tests/
    â”œâ”€â”€ unit/
    â”œâ”€â”€ widget/
    â””â”€â”€ integration/
```

#### 1.3 æ•°æ®æ¨¡å‹

```dart
// lib/data/models/question_model.dart
class QuestionModel {
  final String id;
  final String content;
  final String topic;
  final String difficulty;
  final String? explanation;
  final String? mnemonic;
  final String? scenario;
  final List<String> tags;
  final List<OptionModel> options;

  QuestionModel({
    required this.id,
    required this.content,
    required this.topic,
    required this.difficulty,
    this.explanation,
    this.mnemonic,
    this.scenario,
    required this.tags,
    required this.options,
  });

  factory QuestionModel.fromJson(Map<String, dynamic> json) {
    return QuestionModel(
      id: json['id'],
      content: json['content'],
      topic: json['topic'],
      difficulty: json['difficulty'],
      explanation: json['explanation'],
      mnemonic: json['mnemonic'],
      scenario: json['scenario'],
      tags: List<String>.from(json['tags'] ?? []),
      options: (json['options'] as List)
          .map((e) => OptionModel.fromJson(e))
          .toList(),
    );
  }

  // è·å–æ­£ç¡®ç­”æ¡ˆç´¢å¼•
  int get correctAnswerIndex {
    return options.indexWhere((option) => option.isCorrect);
  }
}

// lib/data/models/option_model.dart
class OptionModel {
  final String id;
  final String optionText;
  final int optionOrder;
  final bool isCorrect;

  OptionModel({
    required this.id,
    required this.optionText,
    required this.optionOrder,
    required this.isCorrect,
  });

  factory OptionModel.fromJson(Map<String, dynamic> json) {
    return OptionModel(
      id: json['id'],
      optionText: json['optionText'],
      optionOrder: json['optionOrder'],
      isCorrect: json['isCorrect'],
    );
  }
}
```

#### 1.4 å›ºå®šé¢˜ç›®æ•°æ®æº

```dart
// lib/data/datasources/local_question_datasource.dart
class LocalQuestionDatasource {
  List<QuestionModel> getMockQuestions() {
    return [
      QuestionModel(
        id: '1',
        content: 'JavaScript ä¸­ typeof null è¿”å›ä»€ä¹ˆï¼Ÿ',
        topic: 'JavaScript',
        difficulty: 'easy',
        explanation: 'è¿™æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²é—ç•™ bugã€‚åœ¨ JavaScript æœ€åˆçš„å®ç°ä¸­ï¼Œå€¼ç”¨ 32 ä½å­˜å‚¨ï¼Œä½ä½ç”¨äºå­˜å‚¨ç±»å‹æ ‡ç­¾ã€‚å¯¹è±¡ç±»å‹çš„ç±»å‹æ ‡ç­¾æ˜¯ 000ï¼Œè€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼ˆ32 ä½ï¼‰ï¼Œå› æ­¤å®ƒçš„ç±»å‹æ ‡ç­¾ä¹Ÿæ˜¯ 000ï¼Œå¯¼è‡´ typeof null è¿”å› "object"ã€‚',
        mnemonic: 'null æ˜¯ç©ºå¯¹è±¡ï¼Œç±»å‹æ˜¯ object',
        scenario: 'é¢è¯•è¿½é—®ï¼šä¸ºä»€ä¹ˆ typeof null === "object"ï¼Ÿè¿™ä¸ª bug ä¼šä¿®å¤å—ï¼Ÿ',
        tags: ['typeof', 'null', 'åŸºç¡€'],
        options: [
          OptionModel(
            id: 'opt-1-1',
            optionText: '"null"',
            optionOrder: 0,
            isCorrect: false,
          ),
          OptionModel(
            id: 'opt-1-2',
            optionText: '"undefined"',
            optionOrder: 1,
            isCorrect: false,
          ),
          OptionModel(
            id: 'opt-1-3',
            optionText: '"object"',
            optionOrder: 2,
            isCorrect: true,
          ),
          OptionModel(
            id: 'opt-1-4',
            optionText: '"number"',
            optionOrder: 3,
            isCorrect: false,
          ),
        ],
      ),
      QuestionModel(
        id: '2',
        content: 'ä»¥ä¸‹å“ªä¸ªä¸æ˜¯ JavaScript çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ',
        topic: 'JavaScript',
        difficulty: 'easy',
        explanation: 'JavaScript æœ‰ 7 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šStringã€Numberã€BigIntã€Booleanã€Undefinedã€Nullã€Symbolã€‚Array æ˜¯å¼•ç”¨ç±»å‹ã€‚',
        mnemonic: '7 å¤§åŸºæœ¬ç±»å‹ï¼šSNNBUBS',
        scenario: 'é¢è¯•è¿½é—®ï¼šåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ',
        tags: ['æ•°æ®ç±»å‹', 'åŸºç¡€'],
        options: [
          OptionModel(
            id: 'opt-2-1',
            optionText: 'String',
            optionOrder: 0,
            isCorrect: false,
          ),
          OptionModel(
            id: 'opt-2-2',
            optionText: 'Array',
            optionOrder: 1,
            isCorrect: true,
          ),
          OptionModel(
            id: 'opt-2-3',
            optionText: 'Boolean',
            optionOrder: 2,
            isCorrect: false,
          ),
          OptionModel(
            id: 'opt-2-4',
            optionText: 'Symbol',
            optionOrder: 3,
            isCorrect: false,
          ),
        ],
      ),
      // æ›´å¤šé¢˜ç›®...
    ];
  }
}
```

#### 1.5 çŠ¶æ€ç®¡ç†æµ‹è¯•

```dart
// test/unit/question_provider_test.dart
import 'package:flutter_test/flutter_test.dart';
import 'package:mockito/mockito.dart';
import 'package:baguzhan/presentation/providers/question_provider.dart';

class MockQuestionRepository extends Mock implements QuestionRepository {}

void main() {
  late QuestionProvider provider;
  late MockQuestionRepository mockRepository;

  setUp(() {
    mockRepository = MockQuestionRepository();
    provider = QuestionProvider(mockRepository);
  });

  group('QuestionProvider', () {
    test('åˆå§‹çŠ¶æ€åº”ä¸ºåŠ è½½ä¸­', () {
      expect(provider.isLoading, true);
      expect(provider.questions, isEmpty);
    });

    test('åŠ è½½é¢˜ç›®ååº”æ›´æ–°çŠ¶æ€', () async {
      final mockQuestions = [MockQuestionModel()];
      when(mockRepository.getQuestions(any())).thenAnswer((_) async => mockQuestions);

      await provider.loadQuestions('JavaScript');

      expect(provider.isLoading, false);
      expect(provider.questions, equals(mockQuestions));
    });

    test('é€‰æ‹©é€‰é¡¹ååº”è®°å½•ç­”æ¡ˆ', () {
      provider.selectOption('q-1', 0);

      expect(provider.selectedAnswers['q-1'], equals(0));
    });

    test('æäº¤ç­”æ¡ˆååº”åˆ¤æ–­æ­£ç¡®æ€§', () {
      final question = MockQuestionModel();
      when(question.correctAnswerIndex).thenReturn(2);

      provider.selectOption('q-1', 2);
      final result = provider.submitAnswer('q-1', question);

      expect(result.isCorrect, true);
    });
  });
}
```

#### 1.6 UI ç»„ä»¶

```dart
// lib/presentation/widgets/option_card.dart
class OptionCard extends StatelessWidget {
  final String optionText;
  final int index;
  final bool isSelected;
  final bool? isCorrect;
  final VoidCallback onTap;

  const OptionCard({
    Key? key,
    required this.optionText,
    required this.index,
    required this.isSelected,
    this.isCorrect,
    required this.onTap,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    Color borderColor = Color(0xFFE5E5E5);
    Color backgroundColor = Colors.white;

    if (isSelected && isCorrect != null) {
      if (isCorrect!) {
        borderColor = Color(0xFF58CC02);
        backgroundColor = Color(0xFF58CC02).withOpacity(0.1);
      } else {
        borderColor = Color(0xFFFF4B4B);
        backgroundColor = Color(0xFFFF4B4B).withOpacity(0.1);
      }
    } else if (isSelected) {
      borderColor = Color(0xFF1CB0F6);
    }

    return GestureDetector(
      onTap: onTap,
      child: AnimatedContainer(
        duration: Duration(milliseconds: 200),
        padding: EdgeInsets.all(16),
        decoration: BoxDecoration(
          color: backgroundColor,
          border: Border.all(color: borderColor, width: 2),
          borderRadius: BorderRadius.circular(16),
        ),
        child: Row(
          children: [
            _buildOptionIndicator(),
            SizedBox(width: 12),
            Expanded(
              child: Text(
                optionText,
                style: TextStyle(
                  fontSize: 16,
                  color: Color(0xFF3C3C3C),
                  fontWeight: FontWeight.w600,
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildOptionIndicator() {
    String label = String.fromCharCode(65 + index); // A, B, C, D
    Color? bgColor;

    if (isSelected && isCorrect != null) {
      bgColor = isCorrect! ? Color(0xFF58CC02) : Color(0xFFFF4B4B);
    } else if (isSelected) {
      bgColor = Color(0xFF1CB0F6);
    }

    return Container(
      width: 32,
      height: 32,
      decoration: BoxDecoration(
        color: bgColor ?? Color(0xFFE5E5E5),
        borderRadius: BorderRadius.circular(8),
      ),
      child: Center(
        child: Text(
          label,
          style: TextStyle(
            color: bgColor != null ? Colors.white : Color(0xFF777777),
            fontWeight: FontWeight.bold,
          ),
        ),
      ),
    );
  }
}
```

---

### é‡Œç¨‹ç¢‘ M2: æ¥å…¥ BFF + æ•°æ®åº“

**ç›®æ ‡**: ä»æ•°æ®åº“è¯»å–é¢˜ç›®ï¼Œæ”¯æŒç­›é€‰å’Œéšæœºè·å–

#### 2.1 BFF é¡¹ç›®åˆå§‹åŒ–

```bash
# åˆ›å»º BFF é¡¹ç›®
mkdir baguzhan-bff
cd baguzhan-bff
npm init -y

# å®‰è£…ä¾èµ–
npm install express typescript @types/node @types/express ts-node
npm install pg @types/pg          # PostgreSQL é©±åŠ¨
npm install dotenv
npm install cors
npm install express-rate-limit

# å¼€å‘ä¾èµ–
npm install -D eslint prettier jest @types/jest ts-jest nodemon
```

#### 2.2 BFF é¡¹ç›®ç»“æ„

```
bff/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.ts
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ questions.ts
â”‚   â”‚   â”œâ”€â”€ progress.ts
â”‚   â”‚   â”œâ”€â”€ wrong-questions.ts
â”‚   â”‚   â””â”€â”€ health.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ question.service.ts
â”‚   â”‚   â”œâ”€â”€ progress.service.ts
â”‚   â”‚   â””â”€â”€ cache.service.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ rateLimit.ts
â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ question.repository.ts
â”‚   â”‚   â””â”€â”€ user.repository.ts
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.d.ts
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â””â”€â”€ integration/
â”œâ”€â”€ migrations/          # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ 001_init.sql
â”œâ”€â”€ seeds/              # åˆå§‹æ•°æ®
â”‚   â””â”€â”€ 001_questions.sql
â””â”€â”€ dist/
```

#### 2.3 æ•°æ®åº“é…ç½®

```typescript
// src/config/database.ts
import { Pool, PoolConfig } from 'pg';

const poolConfig: PoolConfig = {
  host: process.env.DB_HOST || 'localhost',
  port: parseInt(process.env.DB_PORT || '5432'),
  database: process.env.DB_NAME || 'baguzhan',
  user: process.env.DB_USER || 'postgres',
  password: process.env.DB_PASSWORD || 'password',
  max: 20,
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
};

export const pool = new Pool(poolConfig);

export async function query(text: string, params?: any[]) {
  const start = Date.now();
  try {
    const res = await pool.query(text, params);
    const duration = Date.now() - start;
    console.log('Executed query', { text, duration, rows: res.rowCount });
    return res;
  } catch (error) {
    console.error('Database query error', error);
    throw error;
  }
}

export async function getClient() {
  const client = await pool.connect();
  return client;
}
```

#### 2.4 é¢˜ç›®ä»“å‚¨

```typescript
// src/repositories/question.repository.ts
import { query } from '../config/database';

export interface QuestionFilters {
  topic?: string;
  difficulty?: string;
  tags?: string[];
  limit?: number;
  random?: boolean;
}

export class QuestionRepository {
  /**
   * è·å–é¢˜ç›®åˆ—è¡¨
   */
  async getQuestions(filters: QuestionFilters = {}) {
    const { topic, difficulty, tags, limit = 10, random = false } = filters;

    let queryText = `
      SELECT
        q.id,
        q.content,
        q.topic,
        q.difficulty,
        q.explanation,
        q.mnemonic,
        q.scenario,
        q.tags,
        json_agg(
          json_build_object(
            'id', o.id,
            'optionText', o.option_text,
            'optionOrder', o.option_order,
            'isCorrect', o.is_correct
          ) ORDER BY o.option_order
        ) as options
      FROM questions q
      LEFT JOIN options o ON q.id = o.question_id
      WHERE q.is_active = true
    `;

    const params: any[] = [];
    let paramCount = 1;

    if (topic) {
      queryText += ` AND q.topic = $${paramCount}`;
      params.push(topic);
      paramCount++;
    }

    if (difficulty) {
      queryText += ` AND q.difficulty = $${paramCount}`;
      params.push(difficulty);
      paramCount++;
    }

    if (tags && tags.length > 0) {
      queryText += ` AND q.tags && $${paramCount}`;
      params.push(tags);
      paramCount++;
    }

    queryText += ` GROUP BY q.id`;

    if (random) {
      queryText += ` ORDER BY RANDOM()`;
    } else {
      queryText += ` ORDER BY q.created_at DESC`;
    }

    queryText += ` LIMIT $${paramCount}`;
    params.push(limit);

    const result = await query(queryText, params);

    return result.rows.map(this.mapRowToQuestion);
  }

  /**
   * æ ¹æ® ID è·å–é¢˜ç›®
   */
  async getQuestionById(id: string) {
    const queryText = `
      SELECT
        q.id,
        q.content,
        q.topic,
        q.difficulty,
        q.explanation,
        q.mnemonic,
        q.scenario,
        q.tags,
        json_agg(
          json_build_object(
            'id', o.id,
            'optionText', o.option_text,
            'optionOrder', o.option_order,
            'isCorrect', o.is_correct
          ) ORDER BY o.option_order
        ) as options
      FROM questions q
      LEFT JOIN options o ON q.id = o.question_id
      WHERE q.id = $1 AND q.is_active = true
      GROUP BY q.id
    `;

    const result = await query(queryText, [id]);

    if (result.rows.length === 0) {
      return null;
    }

    return this.mapRowToQuestion(result.rows[0]);
  }

  /**
   * æœç´¢é¢˜ç›®ï¼ˆå…¨æ–‡æœç´¢ï¼‰
   */
  async searchQuestions(searchTerm: string, limit = 20) {
    const queryText = `
      SELECT
        q.id,
        q.content,
        q.topic,
        q.difficulty,
        q.explanation,
        q.mnemonic,
        q.scenario,
        q.tags,
        json_agg(
          json_build_object(
            'id', o.id,
            'optionText', o.option_text,
            'optionOrder', o.option_order,
            'isCorrect', o.is_correct
          ) ORDER BY o.option_order
        ) as options
      FROM questions q
      LEFT JOIN options o ON q.id = o.question_id
      WHERE q.is_active = true
        AND to_tsvector('chinese', q.content) @@ plainto_tsquery('chinese', $1)
      GROUP BY q.id
      ORDER BY ts_rank(to_tsvector('chinese', q.content), plainto_tsquery('chinese', $1)) DESC
      LIMIT $2
    `;

    const result = await query(queryText, [searchTerm, limit]);

    return result.rows.map(this.mapRowToQuestion);
  }

  /**
   * è·å–é¢˜ç›®ç»Ÿè®¡
   */
  async getQuestionStats() {
    const queryText = `
      SELECT
        topic,
        difficulty,
        COUNT(*) as count
      FROM questions
      WHERE is_active = true
      GROUP BY topic, difficulty
      ORDER BY topic, difficulty
    `;

    const result = await query(queryText);
    return result.rows;
  }

  private mapRowToQuestion(row: any) {
    return {
      id: row.id,
      content: row.content,
      topic: row.topic,
      difficulty: row.difficulty,
      explanation: row.explanation,
      mnemonic: row.mnemonic,
      scenario: row.scenario,
      tags: row.tags || [],
      options: row.options || [],
    };
  }
}
```

#### 2.5 é¢˜ç›®æœåŠ¡

```typescript
// src/services/question.service.ts
import { QuestionRepository } from '../repositories/question.repository';
import { CacheService } from './cache.service';

export class QuestionService {
  private questionRepository: QuestionRepository;
  private cacheService: CacheService;

  constructor() {
    this.questionRepository = new QuestionRepository();
    this.cacheService = new CacheService();
  }

  /**
   * è·å–é¢˜ç›®ï¼ˆå¸¦ç¼“å­˜ï¼‰
   */
  async getQuestions(filters: any = {}) {
    const cacheKey = `questions:${JSON.stringify(filters)}`;

    // å…ˆæŸ¥ç¼“å­˜
    const cached = await this.cacheService.get(cacheKey);
    if (cached) {
      return JSON.parse(cached);
    }

    // æŸ¥æ•°æ®åº“
    const questions = await this.questionRepository.getQuestions(filters);

    // ç¼“å­˜ 5 åˆ†é’Ÿ
    await this.cacheService.set(cacheKey, JSON.stringify(questions), 300);

    return questions;
  }

  /**
   * è·å–æ¯æ—¥ä¸€é¢˜
   */
  async getDailyQuestion() {
    const today = new Date().toISOString().split('T')[0];
    const cacheKey = `daily:${today}`;

    const cached = await this.cacheService.get(cacheKey);
    if (cached) {
      return JSON.parse(cached);
    }

    // ä½¿ç”¨æ—¥æœŸä½œä¸ºéšæœºç§å­ï¼Œä¿è¯åŒä¸€å¤©è·å–ç›¸åŒé¢˜ç›®
    const questions = await this.questionRepository.getQuestions({
      random: true,
      limit: 1,
    });

    if (questions.length > 0) {
      await this.cacheService.set(cacheKey, JSON.stringify(questions[0]), 86400);
      return questions[0];
    }

    return null;
  }

  /**
   * æœç´¢é¢˜ç›®
   */
  async searchQuestions(searchTerm: string) {
    return this.questionRepository.searchQuestions(searchTerm);
  }

  /**
   * è·å–é¢˜åº“ç»Ÿè®¡
   */
  async getStats() {
    const cacheKey = 'stats:overview';

    const cached = await this.cacheService.get(cacheKey);
    if (cached) {
      return JSON.parse(cached);
    }

    const stats = await this.questionRepository.getQuestionStats();
    await this.cacheService.set(cacheKey, JSON.stringify(stats), 600);

    return stats;
  }
}
```

#### 2.6 ç¼“å­˜æœåŠ¡

```typescript
// src/services/cache.service.ts
import { query } from '../config/database';

export class CacheService {
  /**
   * ç®€å•å†…å­˜ç¼“å­˜ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ç”¨ Redisï¼‰
   */
  private cache: Map<string, { value: string; expiresAt: number }>;

  constructor() {
    this.cache = new Map();
    this.cleanup();
  }

  async get(key: string): Promise<string | null> {
    const item = this.cache.get(key);

    if (!item) {
      return null;
    }

    if (Date.now() > item.expiresAt) {
      this.cache.delete(key);
      return null;
    }

    return item.value;
  }

  async set(key: string, value: string, ttlSeconds: number): Promise<void> {
    const expiresAt = Date.now() + ttlSeconds * 1000;
    this.cache.set(key, { value, expiresAt });
  }

  async delete(key: string): Promise<void> {
    this.cache.delete(key);
  }

  async clear(): Promise<void> {
    this.cache.clear();
  }

  /**
   * å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
   */
  private cleanup() {
    setInterval(() => {
      const now = Date.now();
      for (const [key, item] of this.cache.entries()) {
        if (now > item.expiresAt) {
          this.cache.delete(key);
        }
      }
    }, 60000); // æ¯åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡
  }
}
```

#### 2.7 API è·¯ç”±

```typescript
// src/routes/questions.ts
import express from 'express';
import { QuestionService } from '../services/question.service';
import { questionRateLimiter } from '../middleware/rateLimit';

const router = express.Router();
const questionService = new QuestionService();

/**
 * GET /api/questions
 * è·å–é¢˜ç›®åˆ—è¡¨
 */
router.get('/', questionRateLimiter, async (req, res, next) => {
  try {
    const { topic, difficulty, tags, limit, random } = req.query;

    const filters: any = {};
    if (topic) filters.topic = topic;
    if (difficulty) filters.difficulty = difficulty;
    if (tags) filters.tags = String(tags).split(',');
    if (limit) filters.limit = parseInt(limit as string);
    if (random) filters.random = random === 'true';

    const questions = await questionService.getQuestions(filters);

    res.json({
      success: true,
      data: questions,
      count: questions.length,
    });
  } catch (error) {
    next(error);
  }
});

/**
 * GET /api/questions/daily
 * è·å–æ¯æ—¥ä¸€é¢˜
 */
router.get('/daily', async (req, res, next) => {
  try {
    const question = await questionService.getDailyQuestion();

    if (!question) {
      return res.status(404).json({
        success: false,
        message: 'æš‚æ— æ¯æ—¥ä¸€é¢˜',
      });
    }

    res.json({
      success: true,
      data: question,
    });
  } catch (error) {
    next(error);
  }
});

/**
 * GET /api/questions/search
 * æœç´¢é¢˜ç›®
 */
router.get('/search', async (req, res, next) => {
  try {
    const { q, limit = 20 } = req.query;

    if (!q) {
      return res.status(400).json({
        success: false,
        message: 'è¯·æä¾›æœç´¢å…³é”®è¯',
      });
    }

    const questions = await questionService.searchQuestions(
      q as string,
      parseInt(limit as string)
    );

    res.json({
      success: true,
      data: questions,
      count: questions.length,
    });
  } catch (error) {
    next(error);
  }
});

/**
 * GET /api/questions/stats
 * è·å–é¢˜åº“ç»Ÿè®¡
 */
router.get('/stats', async (req, res, next) => {
  try {
    const stats = await questionService.getStats();

    res.json({
      success: true,
      data: stats,
    });
  } catch (error) {
    next(error);
  }
});

/**
 * GET /api/questions/:id
 * è·å–å•ä¸ªé¢˜ç›®
 */
router.get('/:id', async (req, res, next) => {
  try {
    const question = await questionService.getQuestionById(req.params.id);

    if (!question) {
      return res.status(404).json({
        success: false,
        message: 'é¢˜ç›®ä¸å­˜åœ¨',
      });
    }

    res.json({
      success: true,
      data: question,
    });
  } catch (error) {
    next(error);
  }
});

export default router;
```

#### 2.8 é™æµä¸­é—´ä»¶

```typescript
// src/middleware/rateLimit.ts
import rateLimit from 'express-rate-limit';

/**
 * é¢˜ç›® API é™æµ
 * æ¯åˆ†é’Ÿæœ€å¤š 60 æ¬¡è¯·æ±‚
 */
export const questionRateLimiter = rateLimit({
  windowMs: 60 * 1000,
  max: 60,
  message: {
    success: false,
    message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•',
  },
  standardHeaders: true,
  legacyHeaders: false,
});

/**
 * ç”¨æˆ·æ“ä½œ API é™æµï¼ˆç­”é¢˜ã€è®°å½•ç­‰ï¼‰
 * æ¯åˆ†é’Ÿæœ€å¤š 20 æ¬¡è¯·æ±‚
 */
export const userActionRateLimiter = rateLimit({
  windowMs: 60 * 1000,
  max: 20,
  message: {
    success: false,
    message: 'æ“ä½œè¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•',
  },
});
```

#### 2.9 ä¸»å…¥å£æ–‡ä»¶

```typescript
// src/index.ts
import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';
import questionRoutes from './routes/questions';
import progressRoutes from './routes/progress';
import wrongQuestionRoutes from './routes/wrong-questions';
import healthRoutes from './routes/health';
import { errorHandler } from './middleware/errorHandler';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 3000;

// ä¸­é—´ä»¶
app.use(cors({
  origin: process.env.CORS_ORIGIN || '*',
  credentials: true,
}));
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// è¯·æ±‚æ—¥å¿—
app.use((req, res, next) => {
  console.log(`${req.method} ${req.path}`, {
    query: req.query,
    body: req.body,
  });
  next();
});

// è·¯ç”±
app.use('/api/questions', questionRoutes);
app.use('/api/progress', progressRoutes);
app.use('/api/wrong-questions', wrongQuestionRoutes);
app.use('/health', healthRoutes);

// é”™è¯¯å¤„ç†
app.use(errorHandler);

// å¯åŠ¨æœåŠ¡å™¨
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});

export default app;
```

#### 2.10 Flutter é›†æˆ

```dart
// lib/data/repositories/question_repository.dart
import 'package:dio/dio.dart';
import '../models/question_model.dart';

class QuestionRepository {
  final Dio _dio;
  final String baseUrl;

  QuestionRepository(this._dio, {this.baseUrl = 'http://localhost:3000/api'});

  /// è·å–é¢˜ç›®åˆ—è¡¨
  Future<List<QuestionModel>> getQuestions({
    String? topic,
    String? difficulty,
    List<String>? tags,
    int limit = 10,
    bool random = false,
  }) async {
    try {
      final queryParams = <String, dynamic>{
        'limit': limit,
      };
      if (topic != null) queryParams['topic'] = topic;
      if (difficulty != null) queryParams['difficulty'] = difficulty;
      if (tags != null && tags.isNotEmpty) queryParams['tags'] = tags.join(',');
      if (random) queryParams['random'] = 'true';

      final response = await _dio.get(
        '/questions',
        queryParameters: queryParams,
      );

      if (response.data['success']) {
        return (response.data['data'] as List)
            .map((e) => QuestionModel.fromJson(e))
            .toList();
      }
      throw Exception('è·å–é¢˜ç›®å¤±è´¥');
    } catch (e) {
      throw Exception('ç½‘ç»œé”™è¯¯: $e');
    }
  }

  /// è·å–æ¯æ—¥ä¸€é¢˜
  Future<QuestionModel?> getDailyQuestion() async {
    try {
      final response = await _dio.get('/questions/daily');

      if (response.data['success']) {
        return QuestionModel.fromJson(response.data['data']);
      }
      return null;
    } catch (e) {
      throw Exception('è·å–æ¯æ—¥ä¸€é¢˜å¤±è´¥: $e');
    }
  }

  /// æœç´¢é¢˜ç›®
  Future<List<QuestionModel>> searchQuestions(String keyword) async {
    try {
      final response = await _dio.get(
        '/questions/search',
        queryParameters: {'q': keyword},
      );

      if (response.data['success']) {
        return (response.data['data'] as List)
            .map((e) => QuestionModel.fromJson(e))
            .toList();
      }
      return [];
    } catch (e) {
      throw Exception('æœç´¢å¤±è´¥: $e');
    }
  }

  /// è·å–é¢˜åº“ç»Ÿè®¡
  Future<Map<String, dynamic>> getStats() async {
    try {
      final response = await _dio.get('/questions/stats');

      if (response.data['success']) {
        return response.data['data'] as Map<String, dynamic>;
      }
      return {};
    } catch (e) {
      throw Exception('è·å–ç»Ÿè®¡å¤±è´¥: $e');
    }
  }
}
```

---

### é‡Œç¨‹ç¢‘ M3: UI è§†è§‰ä¸äº¤äº’ä¼˜åŒ–

**ç›®æ ‡**: UI è§†è§‰ä¸äº¤äº’è¾¾åˆ°å¤šé‚»å›½é£æ ¼ä¸€è‡´çš„è½»æ¾æ„Ÿä¸æµç•…ä½“éªŒ

ï¼ˆè¿™éƒ¨åˆ†ä¸åŸæŠ¥å‘Šä¿æŒä¸€è‡´ï¼ŒåŒ…å«å¤šé‚»å›½é£æ ¼è®¾è®¡ç³»ç»Ÿã€åŠ¨ç”»æ•ˆæœã€åŠ è½½åŠ¨ç”»ã€å“åº”å¼å¸ƒå±€ç­‰ï¼‰

---

### é‡Œç¨‹ç¢‘ M4: æ•°æ®æŒä¹…åŒ– + é¢˜åº“ç®¡ç†

**ç›®æ ‡**: é”™é¢˜æœ¬ä¸å­¦ä¹ è¿›åº¦å¯æŒä¹…åŒ–ä¸æ£€ç´¢ï¼Œä»¥åŠé¢˜åº“ç®¡ç†åŠŸèƒ½

#### 4.1 ç”¨æˆ·ç­”é¢˜è®°å½•

```typescript
// src/repositories/user.repository.ts
import { query } from '../config/database';

export class UserRepository {
  /**
   * è®°å½•ç”¨æˆ·ç­”é¢˜
   */
  async recordAnswer(data: {
    userId: string;
    questionId: string;
    selectedOptionId: string;
    isCorrect: boolean;
    timeSpent: number;
  }) {
    const queryText = `
      INSERT INTO user_answers (user_id, question_id, selected_option_id, is_correct, time_spent)
      VALUES ($1, $2, $3, $4, $5)
    `;

    await query(queryText, [
      data.userId,
      data.questionId,
      data.selectedOptionId,
      data.isCorrect,
      data.timeSpent,
    ]);

    // å¦‚æœç­”é”™ï¼ŒåŠ å…¥é”™é¢˜æœ¬
    if (!data.isCorrect) {
      await this.addToWrongQuestions(data.userId, data.questionId);
    }

    // æ›´æ–°è¿›åº¦
    await this.updateProgress(data.userId, data.questionId, data.isCorrect);
  }

  /**
   * åŠ å…¥é”™é¢˜æœ¬
   */
  private async addToWrongQuestions(userId: string, questionId: string) {
    const queryText = `
      INSERT INTO user_wrong_questions (user_id, question_id, wrong_count, last_wrong_at)
      VALUES ($1, $2, 1, NOW())
      ON CONFLICT (user_id, question_id)
      DO UPDATE SET
        wrong_count = user_wrong_questions.wrong_count + 1,
        last_wrong_at = NOW(),
        is_resolved = false
    `;

    await query(queryText, [userId, questionId]);
  }

  /**
   * è·å–é”™é¢˜åˆ—è¡¨
   */
  async getWrongQuestions(userId: string) {
    const queryText = `
      SELECT
        wq.user_id,
        wq.question_id,
        wq.wrong_count,
        wq.last_wrong_at,
        wq.is_resolved,
        q.content,
        q.topic,
        q.difficulty,
        json_agg(
          json_build_object(
            'id', o.id,
            'optionText', o.option_text,
            'optionOrder', o.option_order,
            'isCorrect', o.is_correct
          ) ORDER BY o.option_order
        ) as options
      FROM user_wrong_questions wq
      JOIN questions q ON wq.question_id = q.id
      LEFT JOIN options o ON q.id = o.question_id
      WHERE wq.user_id = $1 AND wq.is_resolved = false
      GROUP BY wq.user_id, wq.question_id, wq.wrong_count, wq.last_wrong_at, wq.is_resolved, q.content, q.topic, q.difficulty
      ORDER BY wq.last_wrong_at DESC
    `;

    const result = await query(queryText, [userId]);
    return result.rows;
  }

  /**
   * æ ‡è®°é”™é¢˜ä¸ºå·²æŒæ¡
   */
  async markWrongQuestionResolved(userId: string, questionId: string) {
    const queryText = `
      UPDATE user_wrong_questions
      SET is_resolved = true, resolved_at = NOW()
      WHERE user_id = $1 AND question_id = $2
    `;

    await query(queryText, [userId, questionId]);
  }

  /**
   * æ›´æ–°ç”¨æˆ·è¿›åº¦
   */
  private async updateProgress(userId: string, questionId: string, isCorrect: boolean) {
    // å…ˆè·å–é¢˜ç›®ä¸»é¢˜
    const questionQuery = 'SELECT topic FROM questions WHERE id = $1';
    const questionResult = await query(questionQuery, [questionId]);
    const topic = questionResult.rows[0].topic;

    const queryText = `
      INSERT INTO user_progress (user_id, topic, total_answered, correct_count, current_streak, last_answered_at)
      VALUES ($1, $2, 1, $3, $3, NOW())
      ON CONFLICT (user_id, topic)
      DO UPDATE SET
        total_answered = user_progress.total_answered + 1,
        correct_count = user_progress.correct_count + CASE WHEN $4 THEN 1 ELSE 0 END,
        current_streak = CASE WHEN $4 THEN user_progress.current_streak + 1 ELSE 0 END,
        best_streak = CASE WHEN $4 AND user_progress.current_streak + 1 > user_progress.best_streak THEN user_progress.current_streak + 1 ELSE user_progress.best_streak END,
        last_answered_at = NOW()
    `;

    await query(queryText, [userId, topic, isCorrect ? 1 : 0, isCorrect]);
  }

  /**
   * è·å–ç”¨æˆ·è¿›åº¦
   */
  async getUserProgress(userId: string) {
    const queryText = `
      SELECT * FROM user_progress
      WHERE user_id = $1
      ORDER BY topic
    `;

    const result = await query(queryText, [userId]);
    return result.rows;
  }

  /**
   * è·å–ç”¨æˆ·ç»Ÿè®¡
   */
  async getUserStats(userId: string) {
    const queryText = `
      SELECT
        COUNT(DISTINCT question_id) as total_questions_answered,
        SUM(CASE WHEN is_correct THEN 1 ELSE 0 END) as correct_count,
        SUM(CASE WHEN is_correct THEN 1 ELSE 0 END)::float / COUNT(*) as accuracy_rate,
        AVG(time_spent) as avg_time_spent
      FROM user_answers
      WHERE user_id = $1
    `;

    const result = await query(queryText, [userId]);
    return result.rows[0];
  }
}
```

#### 4.2 é¢˜åº“ç®¡ç† API

```typescript
// src/routes/admin/questions.ts
import express from 'express';
import { query } from '../../config/database';

const router = express.Router();

/**
 * åˆ›å»ºé¢˜ç›®
 */
router.post('/', async (req, res, next) => {
  const client = await query('BEGIN');

  try {
    const { content, topic, difficulty, explanation, mnemonic, scenario, tags, options } = req.body;

    // éªŒè¯æ•°æ®
    if (!content || !topic || !difficulty || !options || options.length !== 4) {
      throw new Error('Invalid input data');
    }

    // æ’å…¥é¢˜ç›®
    const questionQuery = `
      INSERT INTO questions (content, topic, difficulty, explanation, mnemonic, scenario, tags)
      VALUES ($1, $2, $3, $4, $5, $6, $7)
      RETURNING id
    `;
    const questionResult = await query(questionQuery, [
      content,
      topic,
      difficulty,
      explanation,
      mnemonic,
      scenario,
      tags,
    ]);
    const questionId = questionResult.rows[0].id;

    // æ’å…¥é€‰é¡¹
    for (const option of options) {
      const optionQuery = `
        INSERT INTO options (question_id, option_text, option_order, is_correct)
        VALUES ($1, $2, $3, $4)
      `;
      await query(optionQuery, [
        questionId,
        option.optionText,
        option.optionOrder,
        option.isCorrect,
      ]);
    }

    await query('COMMIT');

    res.json({
      success: true,
      data: { id: questionId },
    });
  } catch (error) {
    await query('ROLLBACK');
    next(error);
  }
});

/**
 * æ›´æ–°é¢˜ç›®
 */
router.put('/:id', async (req, res, next) => {
  // ç±»ä¼¼åˆ›å»ºé€»è¾‘ï¼ŒåŠ ä¸Šæ›´æ–°æ“ä½œ
});

/**
 * åˆ é™¤é¢˜ç›®ï¼ˆè½¯åˆ é™¤ï¼‰
 */
router.delete('/:id', async (req, res, next) => {
  try {
    const queryText = 'UPDATE questions SET is_active = false WHERE id = $1';
    await query(queryText, [req.params.id]);

    res.json({
      success: true,
      message: 'é¢˜ç›®å·²åˆ é™¤',
    });
  } catch (error) {
    next(error);
  }
});

export default router;
```

#### 4.3 é¢˜åº“æ•°æ®å¯¼å…¥å·¥å…·

```typescript
// scripts/import-questions.ts
import fs from 'fs';
import { query } from '../src/config/database';

async function importQuestions() {
  const data = fs.readFileSync('./seeds/questions.json', 'utf8');
  const questions = JSON.parse(data);

  for (const question of questions) {
    const client = await query('BEGIN');

    try {
      // æ’å…¥é¢˜ç›®
      const questionQuery = `
        INSERT INTO questions (content, topic, difficulty, explanation, mnemonic, scenario, tags)
        VALUES ($1, $2, $3, $4, $5, $6, $7)
        RETURNING id
      `;
      const questionResult = await query(questionQuery, [
        question.content,
        question.topic,
        question.difficulty,
        question.explanation,
        question.mnemonic,
        question.scenario,
        question.tags,
      ]);
      const questionId = questionResult.rows[0].id;

      // æ’å…¥é€‰é¡¹
      for (const option of question.options) {
        const optionQuery = `
          INSERT INTO options (question_id, option_text, option_order, is_correct)
          VALUES ($1, $2, $3, $4)
        `;
        await query(optionQuery, [
          questionId,
          option.optionText,
          option.optionOrder,
          option.isCorrect,
        ]);
      }

      await query('COMMIT');
      console.log(`âœ… å¯¼å…¥é¢˜ç›®: ${question.content.substring(0, 30)}...`);
    } catch (error) {
      await query('ROLLBACK');
      console.error(`âŒ å¯¼å…¥å¤±è´¥: ${question.content}`, error);
    }
  }

  console.log('å¯¼å…¥å®Œæˆ');
  process.exit(0);
}

importQuestions();
```

#### 4.4 åˆå§‹é¢˜åº“æ•°æ®ç¤ºä¾‹

```json
// seeds/questions.json
[
  {
    "content": "JavaScript ä¸­ typeof null è¿”å›ä»€ä¹ˆï¼Ÿ",
    "topic": "JavaScript",
    "difficulty": "easy",
    "explanation": "è¿™æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²é—ç•™ bugã€‚åœ¨ JavaScript æœ€åˆçš„å®ç°ä¸­ï¼Œå€¼ç”¨ 32 ä½å­˜å‚¨ï¼Œä½ä½ç”¨äºå­˜å‚¨ç±»å‹æ ‡ç­¾ã€‚å¯¹è±¡ç±»å‹çš„ç±»å‹æ ‡ç­¾æ˜¯ 000ï¼Œè€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼ˆ32 ä½ï¼‰ï¼Œå› æ­¤å®ƒçš„ç±»å‹æ ‡ç­¾ä¹Ÿæ˜¯ 000ï¼Œå¯¼è‡´ typeof null è¿”å› \"object\"ã€‚",
    "mnemonic": "null æ˜¯ç©ºå¯¹è±¡ï¼Œç±»å‹æ˜¯ object",
    "scenario": "é¢è¯•è¿½é—®ï¼šä¸ºä»€ä¹ˆ typeof null === \"object\"ï¼Ÿè¿™ä¸ª bug ä¼šä¿®å¤å—ï¼Ÿ",
    "tags": ["typeof", "null", "åŸºç¡€"],
    "options": [
      {
        "optionText": "\"null\"",
        "optionOrder": 0,
        "isCorrect": false
      },
      {
        "optionText": "\"undefined\"",
        "optionOrder": 1,
        "isCorrect": false
      },
      {
        "optionText": "\"object\"",
        "optionOrder": 2,
        "isCorrect": true
      },
      {
        "optionText": "\"number\"",
        "optionOrder": 3,
        "isCorrect": false
      }
    ]
  }
]
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

**Flutter æµ‹è¯•**:
```bash
# è¿è¡Œæµ‹è¯•
flutter test

# è¦†ç›–ç‡æŠ¥å‘Š
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

**Node.js æµ‹è¯•**:
```bash
# package.json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
```

### é›†æˆæµ‹è¯•

```dart
// integration_test/app_test.dart
void main() {
  testWidgets('å®Œæ•´ç­”é¢˜æµç¨‹', (WidgetTester tester) async {
    await tester.pumpWidget(MyApp());

    // 1. é€‰æ‹©ä¸»é¢˜
    await tester.tap(find.text('JavaScript'));
    await tester.pumpAndSettle();

    // 2. ç­‰å¾…é¢˜ç›®åŠ è½½
    await tester.pumpAndSettle(Duration(seconds: 2));

    // 3. é€‰æ‹©ç­”æ¡ˆ
    await tester.tap(find.text('C').first);
    await tester.pumpAndSettle();

    // 4. æäº¤ç­”æ¡ˆ
    await tester.tap(find.text('æäº¤'));
    await tester.pumpAndSettle();

    // 5. éªŒè¯åé¦ˆæ˜¾ç¤º
    expect(find.text('å›ç­”æ­£ç¡®!'), findsOneWidget);
  });
}
```

---

## ğŸš€ CI/CD æµç¨‹

### GitHub Actions é…ç½®

```yaml
# .github/workflows/flutter-ci.yml
name: Flutter CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.24.0'

      - name: Install dependencies
        run: flutter pub get

      - name: Run tests
        run: flutter test --coverage

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: coverage/lcov.info

      - name: Build APK
        run: flutter build apk --release
```

```yaml
# .github/workflows/bff-ci.yml
name: BFF CI

on:
  push:
    paths:
      - 'bff/**'
    branches: [ main, develop ]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: baguzhan_test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Install dependencies
        working-directory: ./bff
        run: npm ci

      - name: Run linter
        working-directory: ./bff
        run: npm run lint

      - name: Run tests
        working-directory: ./bff
        run: npm test
        env:
          DB_HOST: localhost
          DB_NAME: baguzhan_test

      - name: Build
        working-directory: ./bff
        run: npm run build
```

---

## ğŸ“š æœ€ä½³å®è·µæ€»ç»“

### å¼€å‘è§„èŒƒ

1. **ä»£ç é£æ ¼**
   - Dart/Flutter ä½¿ç”¨å®˜æ–¹ lint è§„åˆ™
   - TypeScript ä½¿ç”¨ ESLint + Prettier
   - SQL è¯­å¥ç»Ÿä¸€ä½¿ç”¨å¤§å†™å…³é”®å­—

2. **æ¶æ„åŸåˆ™**
   - å®¢æˆ·ç«¯åˆ†å±‚: UI / çŠ¶æ€ / æ•°æ®
   - BFF è´Ÿè´£: é‰´æƒã€é™æµã€æŸ¥è¯¢ã€ç¼“å­˜
   - æ•°æ®åº“è®¾è®¡è§„èŒƒåŒ–ï¼Œå»ºç«‹é€‚å½“ç´¢å¼•

3. **æµ‹è¯•ä¼˜å…ˆ**
   - TDD ä¸ºé»˜è®¤å¼€å‘æ–¹å¼
   - å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘
   - é›†æˆæµ‹è¯•éªŒè¯å®Œæ•´æµç¨‹

4. **Git å·¥ä½œæµ**
   - çŸ­åˆ†æ”¯å¼€å‘
   - OpenSpec ææ¡ˆé©±åŠ¨
   - åˆå¹¶å‰ç¡®ä¿æµ‹è¯•é€šè¿‡

### æ€§èƒ½ä¼˜åŒ–

1. **å‰ç«¯ä¼˜åŒ–**
   - é¢˜ç›®åˆ—è¡¨åˆ†é¡µåŠ è½½
   - å›¾ç‰‡æ‡’åŠ è½½
   - æœ¬åœ°ç¼“å­˜ç­–ç•¥

2. **åç«¯ä¼˜åŒ–**
   - æŸ¥è¯¢ç»“æœç¼“å­˜ï¼ˆå†…å­˜/Redisï¼‰
   - æ•°æ®åº“è¿æ¥æ± 
   - åˆç†ä½¿ç”¨ç´¢å¼•

3. **æ•°æ®åº“ä¼˜åŒ–**
   - ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•
   - ä½¿ç”¨å…¨æ–‡æœç´¢åŠ é€Ÿæœç´¢
   - å®šæœŸåˆ†ææ…¢æŸ¥è¯¢

### å®‰å…¨è€ƒè™‘

1. **API å®‰å…¨**
   - JWT é‰´æƒ
   - è¯·æ±‚é™æµ
   - SQL æ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼‰

2. **æ•°æ®å®‰å…¨**
   - æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
   - CORS é…ç½®
   - è¾“å…¥æ•°æ®æ ¡éªŒ

---

## ğŸ“– å‚è€ƒèµ„æº

### Flutter å®˜æ–¹æ–‡æ¡£
- [Flutter ä¸­æ–‡ç½‘](https://flutter.cn/)
- [Flutter æœ€ä½³å®è·µ](https://docs.flutter.dev/perf/best-practices)

### PostgreSQL ç›¸å…³
- [PostgreSQL å®˜æ–¹æ–‡æ¡£](https://www.postgresql.org/docs/)
- [pg é©±åŠ¨æ–‡æ¡£](https://node-postgres.com/)

### BFF æ¶æ„å®è·µ
- [Nodejs BFF å¼€å‘å¿ƒå¾—å†ç¨‹](https://cloud.tencent.cn/developer/article/1600197)
- [æºç¨‹åº¦å‡åŸºäº TypeScript çš„ BFF è®¾è®¡ä¸å®è·µ](https://www.cnblogs.com/sexintercourse/p/17668926.html)

### å…¨æ ˆå¼€å‘
- [Flutter Web åº”ç”¨å¼€å‘ä¸éƒ¨ç½²](https://blog.csdn.net/codau/article/details/147348715)
- [2025 Flutter å…¨æ ˆå¼€å‘è¯¾ç¨‹](https://edu.51cto.com/topic/6511.html)

---

## âœ… éªŒæ”¶æ ‡å‡†

### M1: åŸºç¡€ UI åŸå‹
- [ ] ç”¨æˆ·å¯å®Œæˆå®Œæ•´ç­”é¢˜å¾ªç¯
- [ ] æ­£ç¡®/é”™è¯¯çŠ¶æ€æ­£ç¡®æ˜¾ç¤º
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%

### M2: BFF + æ•°æ®åº“
- [ ] æˆåŠŸä»æ•°æ®åº“è¯»å–é¢˜ç›®
- [ ] æ”¯æŒæŒ‰ä¸»é¢˜ã€éš¾åº¦ç­›é€‰
- [ ] æ”¯æŒéšæœºé¢˜ç›®å’Œæ¯æ—¥ä¸€é¢˜
- [ ] é¢˜ç›®æœç´¢åŠŸèƒ½å¯ç”¨

### M3: UI ä¼˜åŒ–
- [ ] å¤šé‚»å›½é£æ ¼è§†è§‰ä¸€è‡´æ€§
- [ ] åŠ¨ç”»æµç•…è‡ªç„¶
- [ ] å¤šå°ºå¯¸è®¾å¤‡é€‚é…å®Œæˆ

### M4: æ•°æ®æŒä¹…åŒ– + é¢˜åº“ç®¡ç†
- [ ] é”™é¢˜æœ¬åŠŸèƒ½å¯ç”¨
- [ ] å­¦ä¹ è¿›åº¦æ­£ç¡®è®°å½•ä¸å±•ç¤º
- [ ] é¢˜åº“ç®¡ç† API å¯ç”¨
- [ ] é¢˜ç›®å½•å…¥å·¥å…·å¯ç”¨

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-01-26
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0ï¼ˆåŸºäºæ•°æ®åº“é¢˜åº“æ–¹æ¡ˆï¼‰
